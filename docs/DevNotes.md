# Заметки при разработке

* Я первый раз самостоятельно реализую репозиторий поверх EF (мне очень не нравится такая практика, особенно в контексте существования TestContainers), поэтому он такой кривой :disappointed:
* Я решил использовать классы для передачи результата выполнения сервисов потому, что этот подход быстрее, чем использование исключений с глобальным обработчиком или фильтром. Очевидный минус - результат нужно обрабатывать в контроллере, что увеличивает объем кода на лишнюю строку для каждого метода.
* Я не стал разделять заявки на две сущности - поданные и черновики, а добавил им статус. Сейчас это решение не кажется оптимальным, например, из-за индекса с фильтром. У такого подхода есть очевидный минус: логика валидации отправленных и не отправленных заявок различная, => в таблице одновременно находятся валидные и невалидные заявки, отличающиеся только статусом. Ответственность за целостность отправленных заявок полностью на коде.
  * *Можно повесить ещё больше ограничений на отправленные заявки, но это повлияет на производительность.*

* Для получения списка активностей я добавил сорс генератор, вытаскивающий описание из атрибута элемента перечисления. Несколько коробит, что Domain зависит от внешнего пакета. Зато быстро :sweat_smile:
  * *Можно было бы в БД хранить, но... Кто будет БД заполнять? Как обеспечивать согласованность с полями заявки? Etc. Морока :(*


## ToDo:

- [x] Cервис хранит свое состояние в базе данных и данные не теряются после рестарта
- [x] Критерии приемки описаны в тестах
- [x] Создан флоу тестирования
- [x] Приложение контейнеризовано и поднимается docker-compose
  - [x] Контейнер для приложения создается корректно и кеширует зависимости.
  - [x] Присутствует `.env.template`.
  
- [x] Контроллеры задокументированы
- [x] FluentValidation:
  - [x] Created
  - [x] Updated
  - [x] Submit

- [x] ResultDto для связи сервисов и контроллера

